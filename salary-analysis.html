
<html>
    <head>
        <title>AL Salary Analysis, June 2015</title>
        <style>
            h1 {
                font-size: 140%;
            }

            svg {
                margin-right: 100px;
            }

            .axis path,
            .axis line {
                fill: none;
                stroke: black;
                shape-rendering: crispEdges;
            }

            .bar {
                fill: darkblue;
                opacity: 0.01;
            }
        </style>
    </head>
    <body>
        <h1>AL Salary Analysis, June 2015</h1>

        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
        <script>
            'use strict';

            function renderGraph(svg, subtitle, data, low_field, high_field, height) {
                let yScale = d3.scale.linear()
                    .range([height, 0])
                    .domain([d3.min(data, function(d) { return d[low_field]; }),
                             d3.max(data, function(d) { return d[high_field]; })]);

                let yAxis = d3.svg.axis()
                    .scale(yScale)
                    .orient('left');

                svg.append('g')
                    .attr('class', 'y axis')
                    .call(yAxis);

                svg.selectAll('.bar')
                    .data(data)
                    .enter().append('rect')
                        .attr({
                            'class': 'bar',
                            x: 0,
                            y: function(d) { return yScale(d[high_field]); },
                            width: 20,
                            height: function(d) { return yScale(d[low_field]) - yScale(d[high_field]); }
                        });

                svg.append('text')
                    .attr({
                        transform: 'rotate(-90)',
                        y: 6,
                        dy: '0.71em',
                    })
                    .style('text-anchor', 'end')
                    .text(subtitle);
            }

            function renderData(title, csv) {
                let data = d3.csv.parse(csv, function(d) {
                    return {
                        salary_low: parseFloat(d.salary_low),
                        salary_high: parseFloat(d.salary_high),
                        equity_low: parseFloat(d.equity_low),
                        equity_high: parseFloat(d.equity_high)
                    };
                });

                let margin = 40,
                    width = 20,
                    height = 500,
                    full_width = width * 2 + margin * 2;

                let svg = d3.select('body').append('svg')
                    .attr({
                        width: full_width + margin * 2,
                        height: height + margin * 2
                    })
                    .append('g')
                        .attr('transform', `translate(${margin}, ${margin})`);

                svg.append('text')
                    .attr({
                        x: full_width / 2,
                        y: -20
                    })
                    .text(title)
                    .style({
                        'font-weight': 'bold',
                        'font-size': '120%',
                        'text-anchor': 'middle'
                    });

                let g1 = svg.append('g');
                let g2 = svg.append('g')
                    .attr('transform', `translate(${(margin * 2) + width}, 0)`);

                renderGraph(g1, 'Salary', data, 'salary_low', 'salary_high', height);
                renderGraph(g2, 'Equity', data, 'equity_low', 'equity_high', height);
            }

            renderData('Sales', `salary_low,salary_high,equity_low,equity_high
40,65,0.0,0.0
190,240,0.0,0.125
80,90,0.5,1.0
100,150,0.1,0.5
100,150,0.1,0.5
100,180,0.0,0.01
100,180,0.0,0.01
50,80,0.0,0.2
35,70,0.3,0.5
50,90,0.0,0.1
80,120,0.0,0.1
85,165,0.1,1.0
60,70,0.0,0.0
120,140,0.25,0.5
110,130,0.001,0.05
110,130,0.001,0.05
40,45,0.0,0.0
40,80,0.01,0.1
35,55,0.05,0.5
120,200,0.1,0.3
40,60,0.0,0.0
90,120,0.0,0.01
45,75,0.0,0.0
45,60,0.0,0.0
50,60,0.0,0.01
70,100,0.0,0.05
90,120,0.0,0.05
60,85,0.5,1.0
120,170,0.1,1.0
55,130,0.05,0.4
35,85,0.1,0.75
10,10,2.0,4.0
40,80,0.25,1.0
80,110,0.1,1.0
25,60,0.2,0.4
60,100,0.1,0.25
80,160,1.0,4.0
60,120,0.25,1.0
35,50,0.0,0.01
60,140,0.01,0.1
40,86,0.01,0.05
40,65,0.01,0.05
40,80,0.01,0.03
60,90,0.01,0.1
40,60,0.01,0.03
140,140,0.0,0.0
130,160,0.0,0.0
40,60,0.01,0.05
60,100,0.0,0.1
50,80,0.1,0.5
30,60,0.05,0.05
40,60,0.0,0.1
35,65,0.001,0.1
70,100,0.05,0.1
30,50,0.0,0.001
92,92,0.35,0.4
80,90,0.0,1.0
60,130,0.05,0.1
60,130,0.05,0.1
120,160,0.05,0.1
60,80,0.1,0.25
50,60,0.0,0.5
130,150,0.1,0.2
100,150,0.1,1.0
40,45,0.05,0.05
60,75,0.1,0.3
70,80,0.1,0.3
40,60,0.1,0.3
65,70,0.0,0.1
80,100,0.0,0.25
50,80,0.25,0.75
60,75,0.1,0.25
60,75,0.1,0.25
30,60,0.0,0.05
30,60,0.0,0.05
35,45,0.0,0.1
80,90,0.1,0.2
36,50,0.0,1.0
40,60,0.0,0.1
12,48,0.0,0.0
80,120,1.0,4.0
100,180,0.0,0.25
50,90,5.0,15.0
40,100,0.0,0.5
120,160,1.0,2.0
60,140,0.5,2.0
36,40,0.1,1.0
70,90,0.1,0.25
50,130,0.1,2.0
50,85,0.0,0.05
45,75,0.1,0.25
100,180,0.0,0.1
23,26,0.0,0.0
75,90,0.05,0.1
110,150,0.0,0.1
100,150,0.5,1.0
85,150,0.05,0.1
75,150,0.05,0.1
55,55,0.0,2.0
65,85,0.1,0.15
60,90,0.0,0.25
70,150,0.1,0.5
80,120,0.0,1.0
50,130,0.05,1.0
90,105,1.0,5.0
90,150,0.25,0.75
30,45,0.5,1.0
40,70,0.05,0.4
80,110,0.1,0.5
60,90,0.1,0.5
50,70,0.0,0.3
60,80,0.5,2.5
60,120,0.5,2.0
38,45,0.0,0.0
60,70,1.0,2.0
60,70,0.025,0.1
45,55,0.01,0.02
50,60,0.01,0.04
110,130,0.2,0.5
20,50,0.5,1.5
60,120,0.1,0.8
40,70,0.0,0.5
50,90,0.01,0.5
80,140,0.5,4.0
60,80,0.0,0.0
120,200,0.7,1.5
50,75,0.5,5.0
20,40,0.1,0.5
55,80,1.0,4.0
60,120,0.0,0.0
70,150,0.1,4.0`)

            renderData('Marketing', `salary_low,salary_high,equity_low,equity_high
65,75,0.0,0.0
95,105,0.1,0.5
25,35,0.01,0.02
55,95,0.1,0.75
80,130,0.01,0.01
30,80,0.0,1.0
80,150,0.1,1.0
80,130,0.1,0.3
70,120,0.1,0.5
65,85,0.25,0.5
45,55,0.1,0.2
50,130,0.1,1.0
120,170,0.2,1.0
140,200,0.2,1.0
60,80,0.0,0.0
80,120,0.1,0.25
60,90,0.1,0.25
45,50,0.0,0.01
40,90,0.001,0.1
80,90,1.0,2.0
75,90,0.0,5.0
60,75,0.0,4.0
50,80,1.0,5.0
55,65,0.05,0.075
50,65,0.05,0.075
50,70,0.0,0.0
120,140,0.001,1.0
120,140,0.001,1.0
30,42,1.0,2.0
40,50,0.25,1.0
90,140,0.05,0.2
90,140,0.05,0.2
92,92,0.35,0.4
100,140,0.25,0.5
35,45,0.0,0.1
80,100,0.25,0.35
60,80,0.1,0.3
80,120,1.0,4.0
40,60,0.0,0.0
150,230,1.0,3.0
120,150,0.0,0.0
300,350,1.0,1.0
35,40,0.25,1.0
80,100,0.0,0.0
65,110,0.5,2.5
130,150,0.1,0.5
40,45,0.0,0.0
60,85,0.5,1.0
50,60,0.1,0.3
50,65,0.25,1.0
60,70,0.05,0.1
100,150,0.01,0.08
80,130,0.1,0.5
50,65,0.0,0.0
65,85,0.0,0.0
100,120,0.0,0.0
125,135,0.25,0.5
50,120,0.3,0.5
30,60,0.5,1.0
70,100,0.1,0.25
200,240,0.08,0.15
40,80,0.25,1.0
55,70,0.0,0.0
10,10,2.0,4.0
80,120,0.05,1.0
65,90,0.0,0.1
30,60,0.0,0.05
80,110,0.01,0.5
110,140,0.9,1.0
50,90,5.0,15.0
65,125,0.3,1.0
50,75,0.1,0.25
50,65,0.05,0.2
80,100,0.05,1.0
50,80,0.0,0.0
75,125,0.0,0.0
65,90,0.0,0.25
75,85,0.0,0.2
80,160,1.0,2.0
75,100,0.0,0.5
60,120,0.2,2.0
85,110,0.01,0.25
70,100,0.05,0.15
60,120,0.1,0.5
70,100,0.0,2.0
70,100,0.1,0.3
60,80,0.25,0.5
50,130,0.05,1.0
10,90,0.01,1.0
35,50,0.05,0.1
40,70,0.05,0.4
80,110,0.1,0.5
60,90,0.1,0.5
50,70,0.0,0.3
40,70,0.05,0.4
10,50,1.0,2.0
30,80,0.5,2.0
60,80,0.5,2.5
75,85,0.1,0.9
70,80,0.0,0.0
100,150,0.0,0.0
90,130,0.0,0.0
75,85,0.05,0.1
75,85,0.05,0.1
70,80,0.05,0.1
100,140,1.0,2.0
70,120,0.5,2.0
80,100,0.2,0.5
10,10,0.0,0.0
60,120,0.1,0.8
120,140,0.5,1.0
65,70,0.1,0.1
50,75,0.5,5.0
20,40,0.1,0.5
70,150,0.1,4.0
60,120,0.002,0.75
60,120,0.002,0.75`)

            renderData('Engineer', `salary_low,salary_high,equity_low,equity_high
75,120,0.5,1.0
90,140,0.25,1.0
100,120,0.01,0.05
90,120,1.0,3.0
80,120,0.0,1.0
90,130,0.0,0.75
70,90,0.0,0.75
140,180,0.0,1.0
100,170,0.0,1.0
80,110,0.0,0.5
90,125,0.2,0.4
90,130,0.1,0.3
85,135,0.5,1.75
80,160,0.02,0.2
100,180,0.02,0.2
100,170,0.4,1.0
60,110,0.5,2.0
45,100,0.5,2.0
40,80,0.25,1.0
90,120,0.05,0.15
70,90,0.5,0.75
70,120,0.05,1.0
100,160,0.1,0.2
70,100,0.01,0.5
100,180,0.01,0.5
85,120,No equity
85,150,No equity
85,150,No equity
100,130,0.5,1.25
95,130,No equity
60,90,0.1,0.5
60,90,0.1,1.0
110,190,0.0,0.75
70,110,0.2,2.0
80,100,0.5,2.5
100,130,0.1,0.3
100,140,0.0,0.5
60,100,No equity
100,130,0.1,1.0
80,140,0.5,2.5
100,150,1.0,2.0
40,50,No equity
80,135,0.15,0.75
120,140,0.1,0.2
75,100,0.2,0.5
80,100,0.25,0.75
60,110,No equity
70,120,0.5,2.0
110,140,0.2,0.5
165,175,No equity
165,175,No equity
165,175,No equity
80,110,0.1,0.25
70,140,0.0,1.0
125,130,0.4,0.5
70,120,0.5,1.5
100,175,0.03,0.1
100,175,0.03,0.1
100,175,0.03,0.1
70,130,0.1,0.3
100,125,0.1,0.4
90,110,1.0,3.0
100,150,0.5,1.0
90,150,0.1,0.5
90,115,0.5,2.0
90,115,0.5,2.0
120,180,0.1,0.4
110,180,0.1,0.3
70,140,0.5,1.5
100,140,0.05,0.15
80,140,0.5,1.25
100,120,0.5,1.0
85,125,0.1,0.5
80,120,0.25,0.4
100,125,0.5,2.0
75,100,0.2,1.0
120,165,0.04,0.1
80,150,0.1,2.0
200,250,3.0,4.0
50,125,1.5,5.0
80,110,0.5,2.0
90,120,0.5,1.0
84,108,0.25,0.5
80,120,0.5,3.0
40,70,4.0,8.0
90,130,0.1,1.0
90,120,0.01,0.25
80,140,0.5,5.0
60,90,0.0,0.5
100,125,5.0,10.0
80,100,0.5,1.0
115,175,0.1,0.5
150,200,1.0,5.0
80,135,0.1,0.75
85,100,0.5,3.0
50,65,0.0,1.0
80,110,0.1,1.0
80,110,0.0,0.1
80,120,0.25,3.0
70,150,0.5,2.0
90,110,0.5,1.0
90,120,0.5,1.5
100,100,No equity
75,100,0.2,0.75
100,180,0.0,0.001
90,130,0.25,0.66
80,150,0.1,1.0
90,150,0.2,0.8
80,160,0.01,1.0
10,75,1.0,2.0
85,100,1.0,3.0
120,140,0.09,0.2
90,140,0.07,0.2
100,130,1.5,3.0`)
        </script>
    </body>
</html>
